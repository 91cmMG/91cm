(function(t){function e(e){for(var a,r,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={main:0},s=[];function r(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e27f2c0c"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=r(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){n("db4d"),t.exports=n("56d7")},"0d19":function(t,e,n){t.exports=n.p+"img/laptop.ed6d65e6.jpg"},"1e01":function(t,e,n){},2742:function(t,e,n){},"342fc":function(t,e,n){t.exports=n.p+"img/nineone.0e9714c4.png"},"3fd3":function(t,e,n){"use strict";var a=n("c34a"),i=n.n(a);i.a},"44ab":function(t,e,n){t.exports=n.p+"img/file_icon.662cd4fe.png"},"56c9":function(t,e,n){"use strict";var a=n("2742"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("db4d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r=(n("5c0b"),n("2877")),o={},l=Object(r["a"])(o,i,s,!1,null,null,null),c=l.exports,u=(n("d3b7"),n("96cf"),n("1da1")),h=n("2f62"),d=n("bc3a"),p=n.n(d),m=n("c6e1"),f=n.n(m),g=n("cc7d"),v=n.n(g);a["default"].use(h["a"]);var b=new h["a"].Store({state:{userChannelList:[],stompClient:f.a.over(new v.a("http://localhost:9191/endpoint/")),selectComponent:"main",currentUser:{},userList:[],currentChannelUser:[],isLActive:!1,isRActive:!1},mutations:{setChannelList:function(t,e){t.userChannelList=e},getSelectComponent:function(t,e){t.selectComponent=e},getUserList:function(t,e){t.userList=e},setCurrentUser:function(t,e){t.currentUser=e},resetCurrentUser:function(t){t.currentUser={}}},actions:{userListUpdate:function(t){p.a.get("/api/user/list").then((function(e){t.commit("getUserList",e.data)})).catch((function(t){console.log(t)}))},channelList:function(t){p.a.get("/api/channel/list").then((function(e){t.commit("setChannelList",e.data)})).catch((function(t){}))},initCurrentUser:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/api/user/info").then((function(t){console.log(t.data),e.commit("setCurrentUser",t.data)}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),resetCurrentUser:function(t){t.commit("resetCurrentUser")}},modules:{}}),C=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Login")],1)},_=[],w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",{staticClass:"d-inline-block",attrs:{id:"login-box"}},[n("h1",[t._v("Log in")]),n("form",{attrs:{id:"login-form"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userid,expression:"userid"}],staticClass:"form-control",attrs:{id:"userId",name:"userId",type:"text",placeholder:"아이디를 입력해주세요"},domProps:{value:t.userid},on:{input:function(e){e.target.composing||(t.userid=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"pwd",name:"pwd",type:"password",placeholder:"비밀번호를 입력해주세요"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(1),n("div",{staticClass:"btn btn-outline-primary btn-block",on:{click:t.login}},[t._v("로그인")]),n("div",{staticClass:"btn btn-outline-secondary btn-block",attrs:{onclick:"window.location.href='/'"}},[t._v("회원가입")])]),n("br"),t._m(2)])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"float-left d-inline-block"},[a("img",{staticClass:"img-fluid float-left list-inline",attrs:{src:n("0d19"),alt:"Responsive image"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",value:"",id:"id_save"}}),n("label",{staticClass:"form-check-label text-left",attrs:{for:"id_save"}},[t._v(" Remember me ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticClass:"h6"},[t._v("소셜로그인")]),a("hr"),a("div",[a("a",{attrs:{href:"/oauth2/authorization/github"}},[a("img",{staticClass:"social-logo",attrs:{src:n("7086")}})]),a("a",{attrs:{href:"/oauth2/authorization/google"}},[a("img",{staticClass:"social-logo",attrs:{src:n("a4e6")}})]),a("a",{attrs:{href:"/oauth2/authorization/naver"}},[a("img",{staticClass:"social-logo",attrs:{src:n("bec9")}})])])])}],$=(n("ac1f"),n("5319"),{name:"Login",data:function(){return{userid:"",password:""}},methods:{login:function(){var t=new FormData;t.append("userid",this.userid),t.append("password",this.password),p.a.post("http://localhost:9191/",t).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}},mounted:function(){p.a.get("http://localhost:9191/api/user/login").then((function(t){t.data&&(console.log(t.data),oe.replace("/main"))})).catch((function(t){console.log(t)}))}}),k=$,S=(n("5b23"),Object(r["a"])(k,w,x,!1,null,"168973a9",null)),O=S.exports,j={name:"Home",components:{Login:O}},U=j,L=Object(r["a"])(U,y,_,!1,null,null,null),E=L.exports,T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},M=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"notfound"}},[n("div",{staticClass:"notfound"},[n("div",{staticClass:"notfound-404"},[n("h3",[t._v("Page not found")]),n("h1",[n("span",[t._v("4")]),n("span",[t._v("0")]),n("span",[t._v("4")])])]),n("h2",[t._v("해당 페이지를 찾을 수 없습니다.")]),n("a",{staticClass:"btn btn-white btn-animation-1",attrs:{href:"/"}},[t._v("GO HOME")])])])}],A=(n("3fd3"),{}),P=Object(r["a"])(A,T,M,!1,null,"024548f7",null),R=P.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"clock text"}},[n("p",{staticClass:"date"},[t._v(t._s(t.date))]),n("p",{staticClass:"time"},[t._v(t._s(t.time))])])},B=[],F=(n("fb6a"),["SUN","MON","TUE","WED","THU","FRI","SAT"]),z={name:"Clock",data:function(){return{time:"",date:""}},methods:{updateTime:function(){var t=new Date;this.time=this.zeroPadding(t.getHours(),2)+":"+this.zeroPadding(t.getMinutes(),2)+":"+this.zeroPadding(t.getSeconds(),2),this.date=this.zeroPadding(t.getFullYear(),4)+"-"+this.zeroPadding(t.getMonth()+1,2)+"-"+this.zeroPadding(t.getDate(),2)+" "+F[t.getDay()]},zeroPadding:function(t,e){for(var n="",a=0;a<e;a++)n+="0";return(n+t).slice(-e)}},created:function(){setInterval(this.updateTime,1e3)}},D=z,N=(n("b8d4"),Object(r["a"])(D,H,B,!1,null,"599f0536",null)),I=N.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("LSidebar",{attrs:{modalObj:t.modalObj,channelList:t.channelList},on:{channelUpdate:t.channelUpdate,sendTitle:t.sendTitle}}),n("div",{class:{active:t.$store.state.isLActive},attrs:{id:"m-wrapper"}},[n("MainHeader"),null==t.channelList[0]&&"main"==t.$store.state.selectComponent?n("div",[n("p",[t._v("채팅방을 만들거나 가입해주세요")])]):n("div",["main"==t.$store.state.selectComponent?n("ChannelHeader",{attrs:{channelTitle:t.modalObj.currentChannel.name}}):t._e(),n("keep-alive",[n(t.whichComponent,{tag:"component",attrs:{currentChannel:t.modalObj.currentChannel,stompClient:t.$store.state.stompClient,msgArray:t.msgArray},on:{msgArrayUpdate:t.msgArrayUpdate}})],1)],1)],1),null!=t.channelList[0]?n("RSidebar",{attrs:{modalObj:t.modalObj},on:{passData:t.passData}}):t._e()],1)},J=[],V=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"myflex-column",class:{active:t.$store.state.isLActive},attrs:{id:"sidebar"}},[t._m(0),n("div",{staticClass:"myflex-column menulist"},[n("ul",{staticClass:"list-unstyled components"},[n("div",{staticClass:"menulist-header"},[n("span",[t._v("Channels")]),n("div",{staticClass:"menulist-header-icon"},[n("a",{staticStyle:{"margin-right":"5px"},attrs:{"data-mode":"create"},on:{click:t.prepareModal}},[n("i",{staticClass:"im im-plus-circle"})])])]),n("li",[n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"dropdown-toggle"},[t._v("Channels")]),n("b-collapse",{attrs:{id:"collapse-1",visible:""}},[n("ul",{staticClass:"list-unstyled"},t._l(t.channelList,(function(e,a){return n("li",{key:e.id},[n("a",{on:{click:function(e){return t.sendSelectChannel(a)}}},[t._v(t._s(e.name))])])})),0)])],1),t._m(1),n("ul",{staticClass:"list-unstyled"},t._l(t.channelUsers,(function(e){return n("li",{key:e.email},[n("a",{attrs:{href:"#"}},[t._v(t._s(e.name))])])})),0)])]),n("b-modal",{ref:"modal",attrs:{id:"channelCU",centered:""},on:{show:t.prepareModal,hidden:t.resetModal,ok:t.handleOk},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" "+t._s(t.modalObj.modalTitle)+" ")]},proxy:!0}])},[n("form",{ref:"channelCreateForm",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.channelForm(e)}}},[n("b-form-group",{attrs:{label:"채널 이름",state:t.nameState,"label-for":"channel-input","invalid-feedback":"채널 이름이 필요합니다."}},[n("b-form-input",{attrs:{id:"channel-input",state:t.nameState,required:"",autofocus:""},model:{value:t.channelTitle,callback:function(e){t.channelTitle=e},expression:"channelTitle"}})],1)],1)])],1)}),W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-header"},[a("a",{attrs:{href:"/main"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:n("342fc")}})]),a("h3",[t._v("91CM")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menulist-header"},[n("span",[t._v("Users")])])}],q=n("d4ec"),X=n("bee2"),G=function(){function t(){Object(q["a"])(this,t)}return Object(X["a"])(t,[{key:"getChannelList",value:function(){return p.a.get("http://localhost:9191/api/channel/list")}},{key:"createChannel",value:function(t,e){return p.a.post("http://localhost:9191/api/channel/create",{name:t,member_email:e},{headers:{"Content-Type":"application/json"}})}},{key:"updateChannelAPI",value:function(t){return p.a.post("http://localhost:9191/api/channel/update",t,{headers:{"Content-Type":"application/json"}})}}]),t}(),Y=new G,Q={props:["modalObj","channelList"],watch:{channelList:function(t){this.channelList=t,this.getUserList()}},computed:{},name:"LSidebar",data:function(){return{channelIndex:0,nameState:null,channelmode:"",channelTitle:"",channelUsers:[]}},created:function(){console.log("LSidebar created")},mounted:function(){console.log("LSidebar mounted"),this.getUserList()},updated:function(){console.log("LSidebar updated")},methods:{getUserList:function(){var t=this;this.$http.get("/api/user/channel/"+this.channelList[this.channelIndex].id).then((function(e){t.channelUsers=e.data,t.$eventBus.$emit("channelUserSize",t.channelUsers.length)}))},sendSelectChannel:function(t){this.$store.commit("getSelectComponent","main"),this.channelIndex=t,this.$emit("sendTitle",this.channelList[this.channelIndex]),this.getUserList()},prepareModal:function(t){"create"==t.target.parentNode.dataset.mode?(this.channelmode="create",this.modalObj.modalTitle="채널 생성",this.$bvModal.show("channelCU")):"채널 수정"===this.modalObj.modalTitle&&(this.channelTitle=this.modalObj.currentChannel.name)},checkFormValidity:function(){var t=this.$refs.channelCreateForm.checkValidity();return this.nameState=t,t},RSidebarClose:function(){this.$store.state.isRActive=!1},resetModal:function(){this.channelTitle="",this.nameState=null},handleOk:function(t){t.preventDefault(),this.channelForm()},channelForm:function(){var t=this;this.checkFormValidity()&&(this.$refs["modal"].hide(),this.$nextTick((function(){t.$bvModal.hide("channelCU")})),"채널 생성"===this.modalObj.modalTitle?this.createChannel():"채널 수정"===this.modalObj.modalTitle&&(this.modalObj.currentChannel.name=this.channelTitle,this.updateChannel()))},updateChannel:function(){Y.updateChannelAPI(this.modalObj.currentChannel).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},createChannel:function(){var t=this;Y.createChannel(this.channelTitle,this.$store.state.currentUser.email).then((function(e){Y.getChannelList().then((function(e){t.$emit("channelUpdate",e.data)}))})).catch((function(t){console.warn(t)}))}}},Z=Q,tt=(n("cc5e"),Object(r["a"])(Z,V,W,!1,null,null,null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"myflex-column",class:{barRtoggle:t.$store.state.isRActive},attrs:{id:"r-sidebar"}},[n("div",{staticClass:"r-header r-style"},[n("span",[t._v("About this Channel")]),n("div",{staticStyle:{"flex-grow":"1","justify-content":"flex-end",display:"flex"}},[n("a",{on:{click:t.RSidebarClose}},[n("i",{staticClass:"im im-x-mark"})])])]),n("div",{staticStyle:{overflow:"auto"}},[n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.channel-info",modifiers:{"channel-info":!0}}],staticClass:"r-style"},[n("i",{staticClass:"im im-info"}),n("span",{staticStyle:{"margin-left":"20px"}},[t._v("Channel Details")]),t._m(0)]),n("b-collapse",{attrs:{id:"channel-info"}},[n("div",{staticClass:"s-coll-style"},[n("div",[n("div",{staticStyle:{display:"flex"}},[n("p",[t._v("Channel Name")]),t.modalObj.currentChannel.member_email==t.$store.state.currentUser.email?[n("a",{staticClass:"verti-align",attrs:{"data-mode":"edit"},on:{click:t.prepareModal}},[t._v("Edit")]),n("a",{staticClass:"verti-align",on:{click:t.deleteChannel}},[t._v("Delete")])]:t._e()],2),n("li",{staticClass:"list-unstyled"},[t._v(t._s(t.modalObj.currentChannel.name))])]),n("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[n("b-button",{attrs:{variant:"primary"},on:{click:t.leaveChannle}},[t._v("나가기")])],1)])]),n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.user-info",modifiers:{"user-info":!0}}],staticClass:"r-style"},[n("i",{staticClass:"im im-users"}),n("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.channelUserSize)+" Users")])]),t._m(1),t._m(2)],1)])},at=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-grow":"1","justify-content":"flex-end"}},[n("i",{staticClass:"im im-care-down",staticStyle:{"font-size":"15px"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"r-style"},[n("i",{staticClass:"im im-task-o"}),n("span",{staticStyle:{"margin-left":"20px"}},[t._v("Todo List")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"r-style"},[n("i",{staticClass:"im im-calendar"}),n("span",{staticStyle:{"margin-left":"20px"}},[t._v("Calendar")])])}],it={props:["modalObj"],name:"RSidebar",data:function(){return{channelUserSize:0,userSelect:null}},mounted:function(){var t=this;this.$eventBus.$on("channelUserSize",(function(e){t.channelUserSize=e}))},methods:{leaveChannle:function(){var t=this;this.$http.post("/api/channel/leave",{email:this.$store.state.currentUser.email,channel_id:this.modalObj.currentChannel.id}).then((function(e){t.$alertModal("alert redirect",t.modalObj.currentChannel.name+" 채널에서 나갔습니다.")})).catch((function(e){t.$alertModal("error","나가기에 실패했습니다.")}))},RSidebarClose:function(){this.$store.state.isRActive=!1},prepareModal:function(t){"edit"==t.target.dataset.mode&&(this.modalObj.modalTitle="채널 수정",this.$emit("passData",this.modalObj),this.$bvModal.show("channelCU"))},msgBox:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$bvModal.msgBoxConfirm(e,{title:"확인",okTitle:"확인",okVariant:"danger",buttonSize:"sm",cancelTitle:"취소"}).then((function(t){return n.userSelect=t,t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deleteChannel:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.msgBox("정말로 채널을 삭제하시겠습니까?");case 2:if(console.log(this.userSelect),e=this.$store.state.currentUser,console.log(e),this.userSelect){t.next=7;break}return t.abrupt("return");case 7:if(this.modalObj.currentChannel.member_email!=e.email){t.next=10;break}return t.next=10,this.$http.post("http://localhost:9191/api/channel/delete",this.modalObj.currentChannel).then((function(t){console.log(t),n.modalObj.currentChannel=null,n.modalObj.modalTitle=null,n.$router.go("/main")})).catch((function(t){console.log(t)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},st=it,rt=Object(r["a"])(st,nt,at,!1,null,null,null),ot=rt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"white"}},[t.$store.state.isLActive?a("i",{staticClass:"im im-angle-left-circle btn btn-info",on:{click:t.LSidebarToggle}}):a("i",{staticClass:"im im-angle-right-circle btn btn-info",on:{click:t.LSidebarToggle}}),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{staticClass:"verti-align",attrs:{"no-caret":"",right:"","toggle-class":"nonoutline"},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"im im-bell"})]},proxy:!0}])},[a("b-dropdown-item",{attrs:{href:"#"}},[t._v("EN")]),a("b-dropdown-item",{attrs:{href:"#"}},[t._v("ES")]),a("b-dropdown-item",{attrs:{href:"#"}},[t._v("RU")]),a("b-dropdown-item",{attrs:{href:"#"}},[t._v("FA")])],1),a("div",{staticClass:"verti-align useridsty"},[t._v(t._s(t.$store.state.currentUser.name))]),a("b-nav-item-dropdown",{attrs:{"no-caret":"",right:"","toggle-class":"nonoutline"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t.$store.state.currentUser.picture?a("img",{staticClass:"icon-round",attrs:{src:t.$store.state.currentUser.picture,width:"40",height:"40"}}):a("img",{staticClass:"icon-round",attrs:{src:n("d7be"),width:"40",height:"40"}})]},proxy:!0}])},[a("b-dropdown-item",{on:{click:t.callComponent}},[t._v("Profile")]),a("b-dropdown-item",{on:{click:t.SignOut}},[t._v("Sign Out")])],1)],1)],1)],1)},ct=[],ut={name:"MainHeader",data:function(){return{}},methods:{callComponent:function(){this.$store.commit("getSelectComponent","user")},LSidebarToggle:function(){this.$store.state.isLActive=!this.$store.state.isLActive},RSidebarOpen:function(){this.$store.state.isRActive=!0},SignOut:function(){window.location.href="/logout"}}},ht=ut,dt=Object(r["a"])(ht,lt,ct,!1,null,null,null),pt=dt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"mainwrapper"},[a("div",{staticClass:"h-inherit",on:{drop:function(e){return e.preventDefault(),t.dropFile(e)},dragover:function(t){t.preventDefault()}}},[a("ul",{staticClass:"c-c-wrapper list-unstyled",on:{scroll:t.scrollEvt}},t._l(t.msgArray,(function(e){return a("MsgBox",{key:e.id,scopedSlots:t._u([{key:"m-icon",fn:function(){return[e.user.picture?a("img",{staticClass:"icon-round",attrs:{src:e.user.picture,width:"40",height:"40"}}):a("img",{staticClass:"icon-round",attrs:{src:n("d7be"),width:"40",height:"40"}})]},proxy:!0},{key:"m-info",fn:function(){return[a("strong",[t._v(t._s(e.user.name))]),a("span",{staticStyle:{"font-size":"11px","margin-left":"3px"}},[t._v(t._s(e.str_send_date))])]},proxy:!0},{key:"m-content",fn:function(){return[null==e.files||e.content?a("div",{staticClass:"mychat-content",domProps:{innerHTML:t._s(e.content)}}):e.files.length>0?a("b-container",{staticClass:"p-4 bg-white",attrs:{fluid:""}},[a("b-row",t._l(e.files,(function(e){return a("b-col",[a("a",{on:{click:function(n){return t.fileDownload(e)}}},[a("b-img",{staticStyle:{"max-width":"200px"},attrs:{thumbnail:"",rounded:"",fluid:"",src:t.selectImage(e),alt:"이미지를 찾을 수 없습니다."}}),a("p",[a("b",[t._v(t._s(e.original_name))])]),a("p",[t._v("file size : "+t._s((e.file_size/1024).toLocaleString(void 0,{minimumFractionDigits:2}))+" kb")])],1)])})),1)],1):t._e()]},proxy:!0}],null,!0)})})),1),t.msgPreviewBool?a("a",{on:{click:t.clickMsgPreview}},[a("div",{class:{active:t.$store.state.isLActive},attrs:{id:"c-c-preview"}},[a("div",{staticClass:"p-wrapper"},[a("div",[t._v(t._s(t.previewObj.username)+" : ")]),a("div",{staticClass:"p-nowrap",domProps:{innerHTML:t._s(t.previewObj.content)}})])])]):t._e(),a("div",{staticClass:"c-i-wrapper"},[a("div",{staticStyle:{"flex-grow":"1"}},[a("i",{staticClass:"im im-cloud-upload",on:{click:function(e){return t.$refs.fileInput.click()}}}),a("input",{ref:"fileInput",attrs:{type:"file",multiple:"",hidden:""},on:{change:t.attachFile}}),t.show?t._e():a("b-form-textarea",{attrs:{autofocus:"",id:"textarea-no-resize",placeholder:"Enter chat message",rows:"3","no-resize":""},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.send(e)},function(e){return(e.type.indexOf("key")||50===e.keyCode)&&e.shiftKey?t.inviteToggle(e):null}],keyup:t.byteCheck},model:{value:t.message.content,callback:function(e){t.$set(t.message,"content",e)},expression:"message.content"}}),t.show?a("div",{staticClass:"input-group"},[t._m(0),a("b-form-input",{ref:"testinput",staticStyle:{height:"80px"},attrs:{list:"user-info-list",autofocus:""},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.invite(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.inviteToggle(e)}]},model:{value:t.message.content,callback:function(e){t.$set(t.message,"content",e)},expression:"message.content"}}),a("datalist",{attrs:{id:"user-info-list"}},t._l(t.$store.state.userList,(function(e){return a("option",{key:e.email},[t._v(t._s(e.name)+" "+t._s(e.email))])})),0)],1):t._e(),a("div",{staticStyle:{display:"flex"}},[a("span",{staticClass:"ml-auto"},[t._v(" "+t._s(t.stringByteLength)+" / 30000Byte")])])],1),t.show?a("b-button",{staticStyle:{height:"57px",width:"70px","margin-left":"20px"},attrs:{variant:"primary"},on:{click:t.invite}},[t._v("전송 ")]):a("b-button",{staticStyle:{height:"57px",width:"70px","margin-left":"20px"},attrs:{variant:"primary"},on:{click:t.send}},[t._v("전송 ")])],1)])])},ft=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("@")])])}],gt=(n("99af"),n("4160"),n("3ca3"),n("1276"),n("159b"),n("ddb0"),n("2b3d"),n("2909")),vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"list-unstyled chat-message"},[a("div",{staticClass:"icon"},[t._t("m-icon",[a("img",{attrs:{src:n("d7be"),width:"40",height:"40"}})])],2),a("div",[a("div",{staticClass:"verti-align"},[t._t("m-info",[a("strong",[t._v("username")]),a("span",{staticStyle:{"font-size":"11px","margin-left":"3px"}},[t._v(" 11:09 AM May 9")])])],2),a("div",{staticClass:"verti-align"},[t._t("m-content")],2)])])},bt=[],Ct={name:"MsgBox"},yt=Ct,_t=Object(r["a"])(yt,vt,bt,!1,null,null,null),wt=_t.exports,xt=function(){function t(){Object(q["a"])(this,t)}return Object(X["a"])(t,[{key:"invite",value:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,p.a.post("/api/invite",{channel_id:n,sender:e,recipient:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(e,n,a){return t.apply(this,arguments)}return e}()}]),t}(),$t=new xt,kt=(n("498a"),function(){function t(){Object(q["a"])(this,t)}return Object(X["a"])(t,[{key:"replacemsg",value:function(t){var e=t.split("\n"),n="";for(var a in e)n+="<p>"+e[a]+"</p>";return n.replace(/ /gi,"&nbsp;")}},{key:"replacemsgForPreview",value:function(t){var e=t.split("</p><p>"),n="";for(var a in e)n+=e[a]+" ";return n}},{key:"byteCount",value:function(t,e,n,a){for(e=n=0;a=t.charCodeAt(n++);e+=a>>11?3:a>>4?a>>7?2:1:2);return e}},{key:"byteLimit",value:function(t){return!(t>3e4)||(alert("최대 30000byte까지 입력이 가능합니다."),!1)}},{key:"checkFileType",value:function(t){var e=t.extension;switch(e=e.toLowerCase().trim(),e){case"png":return t.path;case"zip":return n("5c79");case"pdf":return n("d98c");case"txt":return n("7e97");default:return n("44ab")}}}]),t}()),St=new kt,Ot={props:["currentChannel","stompClient","msgArray"],name:"ContentWrapper",components:{MsgBox:wt},data:function(){return{tempImg:"",stringByteLength:0,previewObj:{content:"",username:""},show:!1,message:{channel_id:this.currentChannel.channel_id,content:"",sender:this.$store.state.currentUser.email,user:{}},cursorPoint:{channel_id:0,first:!0,cursorId:0,empty:!1},firstLoad:!0,oldScrollHeight:0,wrapperEl:null,msgPreviewBool:!1,getmsgBool:!1}},created:function(){this.getMessage()},mounted:function(){var t=this;this.$nextTick((function(){t.wrapperEl=document.querySelector(".c-c-wrapper")}))},updated:function(){this.scrollToEnd(),console.log(this.msgArray)},methods:{dropFile:function(t){this.addFile(t.dataTransfer.files),console.log(t)},attachFile:function(t){console.log(t),this.addFile(t.target.files),this.$refs.fileInput.value=null},selectImage:function(t){return St.checkFileType(t)},fileDownload:function(t){this.$http.get(t.path,{responseType:"blob"}).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",t.original_name),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n)}))},addFile:function(t){var e=104857600,n=0;if(console.log(t),t){var a=new FormData,i=[];Object(gt["a"])(t).forEach((function(t){i.push(t)})),i.forEach((function(t){a.append("files",t),n+=t.size})),n>=e?this.$alertModal("alert","한번에 보낼 수 있는 파일 용량은 100MB 입니다."):(a.append("channel_id",this.currentChannel.id),a.append("sender",this.message.sender),this.$http.post("/api/file/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)})))}},invite:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.message.content.split(" ")[0],n=this.message.content.split(" ")[1],console.log(this.currentChannel.id),t.next=5,$t.invite(this.$store.state.currentUser.email,this.currentChannel.id,n).then((function(t){console.log(t),a.message.content=e+"님을 초대했습니다.",a.$eventBus.$emit("getUserList",!0),a.send(),a.inviteToggle()})).catch((function(t){a.$alertModal("error",t.response.data.message),console.error(t.response),a.message.content=""}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),inviteToggle:function(t){this.message.content="",this.show=!this.show},send:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.message.channel_id=this.currentChannel.id,this.message.user=this.$store.state.currentUser,St.byteLimit(this.stringByteLength)&&(this.$store.state.stompClient&&this.$store.state.stompClient.connected?(this.$store.state.stompClient.send("/pub/chat/message",JSON.stringify(this.message),{}),this.message.content="",this.scrollToEnd(!0)):(this.message.content=St.replacemsg(this.message.content),this.message.content='<p style="color:red;">메세지 전송에 실패하였습니다.</p>'+this.message.content,e=JSON.parse(JSON.stringify(this.message)),this.msgArray.push(e),this.message.content=""));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),scrollEvt:function(t){var e=t.target;e.scrollTop<=0&&e.scrollHeight!=e.clientHeight?0==this.cursorPoint.empty&&this.getMessage(e):this.isScrollAtEnd(e)&&(this.msgPreviewBool=!1)},getMessage:function(t){var e=this;this.cursorPoint.channel_id=this.currentChannel.id,this.$http.post("http://localhost:9191/api/message/getmsg",JSON.stringify(this.cursorPoint),{headers:{"Content-Type":"application/json"}}).then((function(n){console.log(n.data),0==n.data.length?e.cursorPoint.empty=!0:(e.cursorPoint.first=!1,e.cursorPoint.cursorId=n.data[n.data.length-1].id),e.msgArray=n.data.reverse().concat(e.msgArray),null!=t&&e.$nextTick((function(){t.scrollTop=t.scrollHeight-e.oldScrollHeight,e.oldScrollHeight=t.scrollHeight})),e.getmsgBool=!0,e.$emit("msgArrayUpdate",e.msgArray)}))},scrollToEnd:function(t){var e=this;this.$nextTick((function(){e.firstLoad&&(e.oldScrollHeight=e.wrapperEl.scrollHeight),console.log("oldScrollHeight : "+e.oldScrollHeight),console.log("this.wrapperEl.clientHeight : "+e.wrapperEl.clientHeight),console.log("this.wrapperEl.scrollHeight : "+e.wrapperEl.scrollHeight),(e.isScrollAtEnd(e.wrapperEl)||e.firstLoad||t||e.oldScrollHeight==e.wrapperEl.clientHeight&&e.wrapperEl.scrollHeight>e.wrapperEl.clientHeight)&&(e.wrapperEl.scrollTop=e.wrapperEl.scrollHeight,e.firstLoad=!1,e.oldScrollHeight=e.wrapperEl.scrollHeight)}))},isScrollAtEnd:function(t){return Math.floor(t.scrollTop+t.clientHeight)==this.oldScrollHeight},clickMsgPreview:function(){this.scrollToEnd(!0),this.msgPreviewBool=!1},initData:function(){this.cursorPoint.channel_id=this.currentChannel.id,this.cursorPoint.first=!0,this.cursorPoint.cursorId=0,this.cursorPoint.empty=!1,this.msgArray=[],this.firstLoad=!0,this.scrollHeight=0,this.$emit("msgArrayUpdate",this.msgArray)},byteCheck:function(t){this.stringByteLength=St.byteCount(this.message.content),(47<t.keyCode&&t.keyCode<112||13==t.keyCode||32==t.keyCode)&&St.byteLimit(this.stringByteLength)}},watch:{currentChannel:function(t,e){this.initData(),this.getMessage(),this.scrollToEnd()},msgArray:function(){if(this.getmsgBool)this.getmsgBool=!1;else if(!this.isScrollAtEnd(this.wrapperEl)){var t=JSON.parse(JSON.stringify(this.msgArray[this.msgArray.length-1]));this.previewObj.content=null==t.content?"첨부파일":St.replacemsgForPreview(t.content),this.previewObj.username=this.msgArray[this.msgArray.length-1].user.name,this.msgPreviewBool=!0}}}},jt=Ot,Ut=Object(r["a"])(jt,mt,ft,!1,null,null,null),Lt=Ut.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"mainwrapper"},[a("div",{staticClass:"h-inherit cetered-align",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"info-wrapper"},[a("h4",{staticClass:"center"},[t._v("회원정보")]),a("br"),a("div",{staticClass:"hori-align",staticStyle:{margin:"24px 0px 35px 0"}},[t.$store.state.currentUser.picture?a("img",{staticClass:"icon-round",attrs:{src:t.$store.state.currentUser.picture,width:"200",height:"200"}}):a("img",{staticClass:"icon-round",attrs:{src:n("d7be"),width:"200",height:"200"}})]),a("table",[a("tbody",[a("tr",[t._m(0),a("td",[a("span",[t._v(t._s(t.$store.state.currentUser.name))])])]),a("tr",[t._m(1),a("td",[a("span",[t._v(t._s(t.$store.state.currentUser.email))])])]),a("tr",[t._m(2),a("td",[a("span",[t._v(t._s(t.$store.state.currentUser.phone))])])])])])]),a("b-button",{staticStyle:{margin:"15px"},attrs:{variant:"primary"},on:{click:t.callComponent}},[t._v("수정")])],1)])},Tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("p",[t._v("이름")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("p",[t._v("이메일")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("p",[t._v("전화번호")])])}],Mt={name:"UserInfo",created:function(){console.log(this.$store.state.currentUser)},methods:{callComponent:function(){this.$store.commit("getSelectComponent","edit")}}},At=Mt,Pt=Object(r["a"])(At,Et,Tt,!1,null,null,null),Rt=Pt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"mainwrapper"},[a("div",{staticClass:"h-inherit cetered-align",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"info-wrapper"},[a("h4",{staticClass:"center"},[t._v("회원정보 수정")]),a("br"),a("div",{staticClass:"hori-align",staticStyle:{margin:"24px 0px 35px 0"}},[t.$store.state.currentUser.picture?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],attrs:{variant:"light"}},[a("img",{staticClass:"icon-round",attrs:{src:t.$store.state.currentUser.picture,width:"200",height:"200"}})]):a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],attrs:{variant:"light"}},[a("img",{staticClass:"icon-round",attrs:{src:n("d7be"),width:"200",height:"200"}})])],1),a("table",[a("tbody",[a("tr",[t._m(0),a("td",[a("b-input",{attrs:{type:"text",name:"name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1)]),a("tr",[t._m(1),a("td",[a("b-input",{attrs:{type:"email",name:"email",disabled:"true"},model:{value:t.$store.state.currentUser.email,callback:function(e){t.$set(t.$store.state.currentUser,"email",e)},expression:"$store.state.currentUser.email"}})],1)]),a("tr",[t._m(2),a("td",[a("b-input",{attrs:{type:"text",name:"phone"},on:{keyup:t.phoneFormatter},model:{value:t.user.phone,callback:function(e){t.$set(t.user,"phone",e)},expression:"user.phone"}})],1)])])])]),a("b-button",{staticStyle:{margin:"15px"},attrs:{variant:"primary"},on:{click:t.edit}},[t._v("수정")])],1),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"프로필 사진"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[a("form",{ref:"form",on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[a("b-form-group",{attrs:{state:t.nameState,label:"이미지 url","label-for":"name-input","invalid-feedback":"url 주소가 필요합니다."}},[a("b-form-input",{attrs:{id:"name-input",state:t.nameState,required:""},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}})],1)],1)])],1)},Bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("label",[t._v("이름")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("label",[t._v("이메일")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("label",[t._v("전화번호")])])}],Ft={name:"EditUser",data:function(){return{imageUrl:"",nameState:null,user:Object.assign({},this.$store.state.currentUser)}},mounted:function(){this.$eventBus.$on("stomp")},methods:{handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity&&(this.user.picture=this.imageUrl,this.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing")})))},checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nameState=t,t},resetModal:function(){this.imageUrl=""},edit:function(){var t=this;this.$http.post("/api/user/update",this.user).then((function(e){console.log(t.user),e.data&&(console.log(e.data),t.$store.state.stompClient.send("/pub/sync/info",null,{}),t.$store.dispatch("initCurrentUser"),t.$store.commit("getSelectComponent","user"))}))},phoneFormatter:function(){this.user.phone=this.user.phone.replace(/[^0-9]/g,""),this.user.phone=this.user.phone.replace(/(^02.{0}|^01.{1}|[0-9]{4})([0-9]+)([0-9]{4})/,"$1-$2-$3")}}},zt=Ft,Dt=Object(r["a"])(zt,Ht,Bt,!1,null,null,null),Nt=Dt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"white"}},[n("li",{staticClass:"list-unstyled",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.channelTitle))]),n("a",{staticClass:"nuj verti-align ml-auto",on:{click:t.RSidebarOpen}},[n("i",{staticClass:"im im-menu-dot-h"})])])},Kt=[],Jt={props:["channelTitle"],name:"ChannelHeader",data:function(){return{}},methods:{RSidebarOpen:function(){this.$store.state.isRActive=!0}}},Vt=Jt,Wt=Object(r["a"])(Vt,It,Kt,!1,null,null,null),qt=Wt.exports,Xt={name:"Main",components:{MainHeader:pt,LSidebar:et,RSidebar:ot,ChannelHeader:qt,ContentWrapper:Lt,UserInfo:Rt,EditProfile:Nt},data:function(){return{channelTitle:"",channelList:[],isRActive:!1,msgArray:[],msgCountObj:{},modalObj:{modalTitle:"",currentChannel:null}}},computed:{whichComponent:function(){switch(this.$store.state.selectComponent){case"main":return"ContentWrapper";case"user":return"UserInfo";case"edit":return"EditProfile";default:return"ContentWrapper"}}},created:function(){var t=this;this.$store.dispatch("userListUpdate"),Y.getChannelList().then((function(e){for(var n in t.channelList=e.data,t.channelList)t.msgCountObj[t.channelList[n].id]=0;null==t.modalObj.currentChannel&&null!=t.channelList[0]&&(t.modalObj.currentChannel=t.channelList[0],t.channelTitle=t.modalObj.currentChannel.name),t.connect()}))},updated:function(){},methods:{storeUpdate:function(){this.$store.dispatch("userListUpdate"),this.$store.dispatch("initCurrentUser")},sendTitle:function(t){this.channelTitle=t.name,this.modalObj.currentChannel=t},passData:function(t){this.modalObj.modalTitle=t.modalTitle},connect:function(){var t=this;this.$store.state.stompClient.connect({},(function(){for(var e in t.channelList)t.$store.state.stompClient.subscribe("/sub/chat/room/"+t.channelList[e].id,(function(e){t.channelSubscribeCallBack(e)}));t.$store.state.stompClient.subscribe("/sub/sync/info",(function(e){"true"==e.body&&t.storeUpdate()})),t.$store.state.stompClient.subscribe("/sub/"+t.$store.state.currentUser.email,(function(e){t.channelSubscribeCallBack(e,!0)}))}))},channelUpdate:function(t){for(var e=this,n=t.length-this.channelList.length,a=n;a>0;a--){var i=t.length-a;this.msgCountObj[t[i].id]=0,this.$store.state.stompClient.subscribe("/sub/chat/room/"+t[i].id,(function(t){e.channelSubscribeCallBack(t)}))}this.channelList=t,null==this.modalObj.currentChannel&&(this.modalObj.currentChannel=this.channelList[0],this.channelTitle=this.modalObj.currentChannel.name)},msgArrayUpdate:function(t){this.msgArray=t},channelSubscribeCallBack:function(t,e){var n=JSON.parse(t.body);n.channel_id==this.modalObj.currentChannel.id?(e&&(n.content='<p style="color:red;">메세지 전송에 실패하였습니다.</p>'+n.content),this.msgArray.push(n)):this.msgCountObj[n.channel_id]+=1}}},Gt=Xt,Yt=Object(r["a"])(Gt,K,J,!1,null,null,null),Qt=Yt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12 min-vh-100 d-flex flex-column justify-content-center"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-md-8 mx-auto"},[n("div",{staticClass:"card rounded shadow shadow-sm mainbox"},[t._m(0),n("div",{staticClass:"card-body"},[t.user.email?t._e():n("label",[t._v("가입할 이메일을 입력해주세요")]),t.user.email?t._e():n("b-input",{attrs:{type:"text",name:"email",placeholder:"이메일"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("label",[t._v("91cm에서 사용할 이름을 입력해주세요")]),n("b-input",{attrs:{type:"text",name:"name",placeholder:"이름"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),n("label",[t._v("업무에 사용하는 핸드폰 번호를 입력해주세요")]),n("b-input",{ref:"phoneNum",attrs:{type:"text",name:"phone",placeholder:"핸드폰 번호"},on:{keyup:t.phoneFormatter},model:{value:t.user.phone,callback:function(e){t.$set(t.user,"phone",e)},expression:"user.phone"}}),n("b-button",{staticClass:"float-right",staticStyle:{margin:"15px"},attrs:{variant:"primary"},on:{click:t.insertUser}},[t._v("등록")])],1)])])])])])])])},te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header"},[n("h5",[t._v("91cm를 사용하기 위해 추가적으로 필요한 정보를 입력해주세요")])])}],ee=(n("466d"),{name:"SignUp",data:function(){return{user:{name:"",phone:"",email:"",picture:""}}},created:function(){this.getUser()},methods:{phoneFormatter:function(){this.user.phone=this.user.phone.replace(/[^0-9]/g,""),this.user.phone=this.user.phone.replace(/(^02.{0}|^01.{1}|[0-9]{4})([0-9]+)([0-9]{4})/,"$1-$2-$3")},getUser:function(){var t=this;this.$http.get("http://localhost:9191/api/user/getsession").then((function(e){t.user.name=e.data.name,t.user.phone=e.data.phone,t.user.email=e.data.email,t.email=t.user.email,t.user.picture=e.data.picture}))},insertUser:function(){var t=this;this.user.email=this.email,console.log(this.user);var e=document.cookie.match("(^|;) ?XSRF-TOKEN=([^;]*)(;|$)");this.$http.post("http://localhost:9191/api/user/signup",JSON.stringify(this.user),{headers:{"X-CSRF-TOKEN":e[2],"Content-Type":"application/json"}}).then((function(e){e.data?t.$router.replace("main"):t.$alertModal("error","회원가입 실패")}))}}}),ne=ee,ae=(n("56c9"),Object(r["a"])(ne,Zt,te,!1,null,null,null)),ie=ae.exports;a["default"].use(C["a"]);var se=[{path:"/",name:"Home",component:E},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"*",component:R},{path:"/clock",component:I},{path:"/main",name:"main",component:Qt,beforeEnter:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.dispatch("initCurrentUser");case 2:null!=b.state.currentUser.phone?a():a("/signup");case 3:case"end":return t.stop()}}),t)})));function e(e,n,a){return t.apply(this,arguments)}return e}()},{path:"/user",component:Qt,children:[]},{path:"/signup",component:ie}],re=new C["a"]({mode:"history",base:"/",routes:se}),oe=re,le=n("5f5b"),ce=(n("ab8b"),n("2dd8"),n("0628")),ue=n.n(ce),he=(n("5aea"),{install:function(t,e){t.msgModalOk=function(t,e,n,a){t.$bvModal.msgBoxOk(n,{okTitle:"확인",buttonSize:"sm",title:e,headerBgVariant:"info",headerTextVariant:"light"}).then((function(e){switch(a){case"redirect":return t.$router.go("/main"),e;default:return e}}))},t.msgModalConfirm=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n,a,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$bvModal.msgBoxConfirm(a,{title:n,okTitle:"확인",okVariant:"danger",buttonSize:"sm",cancelTitle:"취소"}).then((function(t){if(console.log(t),!t)return t;switch(i){case"redirect":return t;default:return t}}));case 2:case"end":return t.stop()}}),t)})));return function(e,n,a,i){return t.apply(this,arguments)}}(),t.prototype.$alertModal=function(e,n){var a=e.split(" ")[0],i=e.split(" ")[1],s="";return"error"==a?(s="에러",t.msgModalOk(this,s,n,i)):(s="알림",t.msgModalOk(this,s,n,i))}}});a["default"].use(he),a["default"].use(ue.a,{persist:!0}),a["default"].prototype.$eventBus=new a["default"],a["default"].prototype.$http=p.a,a["default"].use(le["a"]),a["default"].config.productionTip=!1,new a["default"]({router:oe,store:b,render:function(t){return t(c)}}).$mount("#app")},"5aea":function(t,e,n){},"5b23":function(t,e,n){"use strict";var a=n("7c4d"),i=n.n(a);i.a},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),i=n.n(a);i.a},"5c79":function(t,e,n){t.exports=n.p+"img/zip_icon.6cbba654.png"},7086:function(t,e,n){t.exports=n.p+"img/github_logo.438c93c0.png"},"7c4d":function(t,e,n){},"7e97":function(t,e,n){t.exports=n.p+"img/txt_icon.96da6cdd.png"},"96e4":function(t,e,n){},"9c0c":function(t,e,n){},a4e6:function(t,e,n){t.exports=n.p+"img/google_logo.d555d0ac.png"},b8d4:function(t,e,n){"use strict";var a=n("96e4"),i=n.n(a);i.a},bec9:function(t,e,n){t.exports=n.p+"img/naver_logo.10f1060a.png"},c34a:function(t,e,n){},cc5e:function(t,e,n){"use strict";var a=n("1e01"),i=n.n(a);i.a},d7be:function(t,e,n){t.exports=n.p+"img/default-user-picture.36ab16ac.png"},d98c:function(t,e,n){t.exports=n.p+"img/pdf_icon.02534ec7.png"}});
//# sourceMappingURL=main.eda16a5f.js.map